else {      //if no validation errors, check if customer already exists, else create one

        Customer.getCustomerByName(customerName, function(err, customer) {

            var updateCustomer = {};

            if(err) throw err;

            else if(customer) {
                if(customer._id!=customerId){   //if customer name is not same as previous, check if customer name is already taken
                    errors = [{param: 'username', msg: 'Customer name is already taken', value: '' }];
                    res.render('addCustomer.handlebars', {errors: errors});
                }
                else {
                    updateCustomer.locations = locations;
                    User.updateCustomerById(customerId, updateCustomer, function(err, result) {     //update to database
                        if(err) throw err;
                    });
                }
            }

            else {
                updateCustomer.customerName = customerName;
                updateCustomer.locations = locations;
                User.updateCustomerById(customerId, updateCustomer, function(err, result) {     //update to database
                    if(err) throw err;
                });
            }
        });